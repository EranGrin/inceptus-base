# -*- coding: utf-8 -*-from odoo import api,fields,models,modules,tools,_STATES=[('uninstallable','Uninstallable'),('uninstalled','Not Installed'),('installed','Installed'),('license','Activate Module'),('to upgrade','To be upgraded'),('to remove','To be removed'),('to install','To be installed')]IES_MODULE_LIST=['ies_base_redeem','ies_giftcards','ies_coupons','ies_pos_product_available','ies_pos_return']class v(models.Model): _inherit="ir.module.module" state=fields.Selection(STATES,string='Status',default='uninstalled',readonly=True,index=True) ies_module=fields.Boolean('An Inceptus Module') checksum=fields.Char('Checksum') @api.multi def N(O0O0O0000OO0OO0OO):  return{'name':_('Activate'),'type':'ir.actions.act_window','view_type':'form','view_mode':'form','res_model':'ir.module.module.activation','target':'new'} @staticmethod def C(O00000O0O00OO00O0):  return{'description':O00000O0O00OO00O0.get('description',''),'shortdesc':O00000O0O00OO00O0.get('name',''),'author':O00000O0O00OO00O0.get('author','Unknown'),'maintainer':O00000O0O00OO00O0.get('maintainer',False),'contributors':', '.join(O00000O0O00OO00O0.get('contributors',[]))or False,'website':O00000O0O00OO00O0.get('website',''),'license':O00000O0O00OO00O0.get('license','LGPL-3'),'sequence':O00000O0O00OO00O0.get('sequence',100),'application':O00000O0O00OO00O0.get('application',False),'auto_install':O00000O0O00OO00O0.get('auto_install',False),'icon':O00000O0O00OO00O0.get('icon',False),'summary':O00000O0O00OO00O0.get('summary',''),'url':O00000O0O00OO00O0.get('url')or O00000O0O00OO00O0.get('live_test_url',''),'ies_module':O00000O0O00OO00O0.get('ies_module')} @api.multi def q(O0O0OO0O0O000OOO0,OOO00000O0O00O0OO):  OOOO0O0O0OO0OOO0O=False  for OO00OOO0OOOOOO0OO in O0O0OO0O0O000OOO0:   if OO00OOO0OOOOOO0OO.name in IES_MODULE_LIST and not O0O0OO0O0O000OOO0.env.context.get('active'):    OO00OOO0OOOOOO0OO.state='license'    OOOO0O0O0OO0OOO0O=True  if OOOO0O0O0OO0OOO0O:   return True  return super(v,O0O0OO0O0O000OOO0)._button_immediate_function(OOO00000O0O00O0OO) @api.multi def g(O0000OOO0OO00OO0O):  O00OOOOO000000000=super(v,O0000OOO0OO00OO0O).module_uninstall()  O0000OOO0OO00OO0O.write({'checksum':False})  return O00OOOOO000000000